<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC
"-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk">

	<head>
		<meta http-equiv="Cache-Control" content="no-store" />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="0" />
		<meta http-equiv="content-type"
			content="text/html; charset=iso-8859-1" />
		<link rel="shortcut icon" href="./images/favicon.ico"
			type="image/x-icon" />
		<link rel="stylesheet" type="text/css" href="./styles/wikicrimes.css"
			title="default" />
		<style type="text/css">
		.jscalendar-DB-div-style {
			position: absolute;
			margin-top: -120px;
			margin-left: -18px;
		}
</style>
		<script type="text/javascript" src="./scripts/calendar.js"></script>
		<script type="text/javascript" src="./scripts/calendar-setup.js"></script>
		<script type="text/javascript" src="./scripts/lang/calendar-en.js"></script>
		<script type="text/javascript"
			src="./scripts/lang/#{messages['webapp.calendar']}"></script>
		<c:if test="#{messages['webapp.calendar'] == 'calendar-pt.js' }">
			<script type="text/javascript" src="./scripts/lang/calendar-br.js"></script>
		</c:if>
	</head>
	<body>

		<f:view>
			<!-- > locale="#{facesContext.externalContext.request.locale}" -->
			<f:loadBundle var="messages" basename="messages" />
			<h:form id="relatoForm">

			<h:inputHidden required="true" value="#{relatoForm.latitude}" id="latitude" />
			<h:inputHidden required="true" value="#{relatoForm.longitude}" id="longitude" />
			<h:inputHidden value="#{relatoForm.tipoRelato}" id="tipoRelato" />
			<h:inputHidden value="#{relatoForm.subTipoRelato}" id="subTipoRelato" />
			
			<h:panelGrid border="0" columns="1" style="font-size: 11px; font-family: sans-serif;text-align:left;">
				<c:if test="#{relatoForm.relato.subTipoRelato == 1}">
					<div id="topoBalao"> <b>#{messages['crime.topo.relatoviolencia']}</b> </div>
											
				</c:if>
				<c:if test="#{relatoForm.relato.subTipoRelato == 2}">
					<div id="topoBalao"> <b>#{messages['crime.topo.relatodrogas']}</b> </div>
					
				</c:if>
				<c:if test="#{relatoForm.relato.subTipoRelato == 3}">
					<div id="topoBalao"> <b>#{messages['crime.topo.shebeen.location']}</b> </div>
					
				</c:if>
				<c:if test="#{relatoForm.relato.subTipoRelato == 4}">
					<div id="topoBalao"> <b>#{messages['crime.topo.alcohol.abuse']}</b> </div>
					
				</c:if>
				<c:if test="#{relatoForm.relato.subTipoRelato == 5}">
					<div id="topoBalao"> <b>#{messages['crime.topo.woman.abuse']}</b> </div>
					
				</c:if>
				<c:if test="#{relatoForm.relato.subTipoRelato == 6}">
					<div id="topoBalao"> <b>#{messages['crime.topo.child.abuse']}</b> </div>
					
				</c:if>				

				<h:outputText value="#{messages['relato.periodo']}(*)"
					style="vertical-align: text-top; font-size: 11px;" />

					<c:if test="#{not empty message}">
						<c:if test="#{message == messages['errors.periodo'] }">
							<h:outputText value="#{message}" styleClass="errorMessage" />
						</c:if>
				    </c:if>
				
				<h:panelGrid columns="4">
					<h:selectBooleanCheckbox value="#{relatoForm.madrugada}"><h:outputText value="#{messages['relato.madrugada']}" /></h:selectBooleanCheckbox>
					&nbsp;
					<h:selectBooleanCheckbox value="#{relatoForm.manha}"><h:outputText value="#{messages['relato.manha']}" /></h:selectBooleanCheckbox>
					&nbsp;
					<h:selectBooleanCheckbox value="#{relatoForm.tarde}"><h:outputText value="#{messages['relato.tarde']}" /></h:selectBooleanCheckbox>
					&nbsp;
					<h:selectBooleanCheckbox value="#{relatoForm.noite}"><h:outputText value="#{messages['relato.noite']}" /></h:selectBooleanCheckbox>										
				</h:panelGrid>
				
				<h:panelGrid>
					<h:outputText value="#{messages['relato.descricao']}(*)"
						style="vertical-align: text-top; font-size: 11px;" />
					<h:outputText value="#{messages['relato.descricao.lembrete']}"
						style="font-size: 11px;text-align:left; font-style:italic;" />
					<h:message styleClass="errorMessage" for="descricao" />
					<h:inputTextarea value="#{relatoForm.descricao}" id="descricao"
						cols="66" rows="8" required="true" />
				</h:panelGrid>
				<h:panelGrid>
					<c:if test="#{not empty message}">
						<c:if test="#{message == messages['errors.razao'] }">
							<h:outputText value="#{message}" styleClass="errorMessage" />
						</c:if>
				    </c:if>
					<h:outputText value ="#{messages['razao.titulo']}(*)" />
					<t:selectManyCheckbox layoutWidth="2" id="razoesCheck" layout="pageDirection" value="#{relatoForm.razoesSel}" onclick="enabledOutrasRazoes(this.value);">
						<f:selectItems id="razoes" value="#{relatoForm.razoes}" />
					</t:selectManyCheckbox>
				</h:panelGrid>
				
				<h:panelGrid>
					<h:outputText value ="#{messages['razao.outras.causas']}" />
					<t:inputText id="txtRazaoOutros" forceId="true" value ="#{relatoForm.razaoOutros}" size="40"/>
				</h:panelGrid>
				<script type="text/javascript">
					function enabledOutrasRazoes(code) {
						var outrasRazoes = document.getElementById('txtRazaoOutros');
						//Se opcao selecionada for outras (codigo 19)
						if (code == 19) { 
						 	outrasRazoes.readOnly = !outrasRazoes.readOnly ;
						 	if (outrasRazoes.readOnly) outrasRazoes.value = ''; 
						}
					}
					enabledOutrasRazoes(19);
				</script>
				
				<h:panelGrid>
						<h:outputText value="#{messages['relato.confirmacoes']}(*)"
							style="vertical-align: text-top; font-size: 11px;" />
						<h:outputText value="#{messages['relato.email.lembrete.Confirmacao']}"
							style="font-size: 11px; text-align:left; font-style:italic;" />	
						<c:if test="#{not empty message}">
							<c:if test="#{message == messages['errors.email.confirmacao'] }">
								<h:outputText value="#{message}" styleClass="errorMessage" />
							</c:if>
							<c:if test="#{message == messages['confirmacao.recusada.propria'] }">
								<h:outputText value="#{message}" styleClass="errorMessage" />
							</c:if>							
					    </c:if>	
						
						<h:outputText value="#{messages['crime.email1']}"
							style="vertical-align: text-top; font-size: 11px;" />
							
						<h:inputText value="#{relatoForm.email1}"
							id="email1" size="40">
							<t:validateEmail />
						</h:inputText>	
						<h:message styleClass="errorMessage" for="email1" />
						
						<h:outputText value="#{messages['crime.email2']}"
							style="vertical-align: text-top; font-size: 11px;" />
							
						<h:inputText value="#{relatoForm.email2}"
							id="email2" size="40">
							<t:validateEmail />
						</h:inputText>	
						<h:message styleClass="errorMessage" for="email2" />
						
						<h:outputText value="#{messages['crime.email3']}"
							style="vertical-align: text-top; font-size: 11px;" />
							
						<h:inputText value="#{relatoForm.email3}"
							id="email3" size="40">
							<t:validateEmail />
						</h:inputText>	
						<h:message styleClass="errorMessage" for="email3" />
						
						<h:outputText value="#{messages['crime.email4']}"
							style="vertical-align: text-top; font-size: 11px;" />
							
						<h:inputText value="#{relatoForm.email4}"
							id="email4" size="40">
							<t:validateEmail />
						</h:inputText>	
						<h:message styleClass="errorMessage" for="email4" />
						
						<h:outputText value="#{messages['crime.email5']}"
							style="vertical-align: text-top; font-size: 11px;" />
							
						<h:inputText value="#{relatoForm.email5}"
							id="email5" size="40">
							<t:validateEmail />
						</h:inputText>	
						<h:message styleClass="errorMessage" for="email5" />
						
						<h:outputText value="#{messages['crime.email6']}"
							style="vertical-align: text-top; font-size: 11px;" />
							
						<h:inputText value="#{relatoForm.email6}"
							id="email6" size="40">
							<t:validateEmail />
						</h:inputText>	
						<h:message styleClass="errorMessage" for="email6" />
						
						<h:outputText value="#{messages['mensagem.pessoas.que.esta.indicando']}:"/>
						<h:inputTextarea style="font-size: 11px; font-family: sans-serif;" value="#{relatoForm.mensagemConf}" id="descricaoMensagem"
							cols="38" rows="5"/>
						
					</h:panelGrid>				
				
				<h:outputText value ="#{messages['relato.obrigatorio']}" />
				
				<h:commandButton value="#{messages['crime.btn.registrar']}"
					id="btnRegistrar" action="#{relatoForm.insert}" styleClass="button" />				
				
			</h:panelGrid>
			
			</h:form>			
		</f:view>
	</body>
</html>
