<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC
"-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:jsp="http://java.sun.com/JSP/Page"
	xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">
	<head>
		<meta http-equiv="Cache-Control" content="no-store" />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="0" />
		<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
		<link rel="shortcut icon" href="./images/favicon.ico"
			type="image/x-icon" />
	</head>

	<body style="overflow-x: hidden">

		<f:view>
		<f:loadBundle var="messages" basename="messages"/>
		<h:form id="minhasDenunciasForm">
		
		<!--<h:outputText value="#{messages['usuario.reputacao']} " style="font-size:12px;" />
		<h:outputText value="#{usuario.ultimaReputacao.reputacao * 100}" style="font-size:12px;" />
        <h:outputText value="%" style="font-size:12px;"/>
        <br/><br/>-->
        	
		<rich:dataTable id="crimes" var="crime"
    	value="#{crimeListForm.crimes}" onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
				border="1" cellspacing="0" cellpadding="0" rows="10"
				styleClass="rich-table" style = "margin-right: 10px;">
     	
		<rich:column>        	
        	<f:facet name="header">            	
                	<h:outputText value="#{messages['crime.credibilidade']}"/>            	
        	</f:facet>
        	<h:outputText value="#{crime.ultimaCredibilidade * 100}">
	    		<f:convertNumber maxFractionDigits="2"/>
        	</h:outputText>
        	<h:outputText value="%"/>
    	</rich:column> 
     	
     	<rich:column>        	
        	<f:facet name="header">            	
                	<h:outputText value="#{messages['crime.tipoCrime']}"/>            	
        	</f:facet>
        	<h:outputText value="#{messages[crime.tipoCrime.nome]}"/>
    	</rich:column> 
    	
    	<rich:column>
        	<f:facet name="header">
                	<h:outputText value="#{messages['crime.tipoLocal']}"/>
        	</f:facet>
        	<h:outputText value="#{messages[crime.tipoLocal.nome]}"/>
    	</rich:column>
    	
    	<rich:column>
        	<f:facet name="header">
                	<h:outputText value="#{messages['crime.tipoArmaUsada']}"/>
        	</f:facet>
        	<h:outputText value="#{messages[crime.tipoArmaUsada.nome]}"/>
    	</rich:column>
    	
    	<rich:column>
        	<f:facet name="header">
                	<h:outputText value="#{messages['crime.horario']}"/>
        	</f:facet>
        	<h:outputText value="#{crime.horario}:00"/>
    	</rich:column>
    	
    	<rich:column>
        	<f:facet name="header">
                	<h:outputText value="#{messages['crime.data']}"/>
        	</f:facet>
        	<h:outputText value="#{crime.data}"/>
    	</rich:column>
    	
    	<rich:column>
        	<f:facet name="header">
                	<h:outputText value="#{messages['scheduler.titulo.descricao']}"/>
        	</f:facet>
        	<h:outputText value="#{crime.descricao}"/>
    	</rich:column>
    	
    	<rich:column>
    	 	<f:facet name="header">
            	<h:outputText value="#{messages['crime.visualizar']}"/>
            </f:facet>
            
        	<a  onclick="fechaModalMostrandoCrime('#{crime.chave}','#{crime.latitude}', '#{crime.longitude}')" style="cursor:pointer;color:blue">
            	<u><h:outputText value="#{messages['crime.mapa']}" /></u>
        	</a>
    	</rich:column>
    	
    	<f:facet name="footer">
			<rich:datascroller for="crimes"/>
		</f:facet>
		</rich:dataTable>
		</h:form>					
		</f:view>
		<script>
			function fechaModalMostrandoCrime(chave, lat, lng){
				parent.mostrarCrimeMapa(chave, lat, lng);
				parent.closeModal('modal');return false;
			}	
		</script>
	</body>
</html>
